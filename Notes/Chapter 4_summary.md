# 第四章
## 总结
数组、结构和指针是C++的3种复合类型。数组可以在一个数据对象中存储多个同种类型的值。通过 __索引__或__下标__，可以访问数组中各个元素。
### 结构・Structure
结构可以将多个不同类型的值存储在同一个数据对象中，可以使用成员关系运算符(.)来访问其中的成员。使用结构的第一步是创建结构模板，他定义结构存储了哪些成员。模板的名称将成为新类型的标识符，然后就可以声明这种类型的结构变量。
示例：
```
struct inflatable   //structure declaration
{
    char name [20];
    float volume;
    double price;
};
```
### 共用体（联合体）・Union 
共用体可以存储一个值，但是这个值可以是不同的类型，成员名指出了使用的模式。
示例：
```
union ex        //定义一个名为ex的联合体/共用体
{
    int Class;  //成员定义 ：类型说明符 成员名
    char name；
}
```
### 指针・Point
指针是被设计用来存储地址的变量。我们说，指针指向了他存储的地址。指针声明指出了指针指向的对象的类型。对指针应用解除引用运算符，将得到指针指向的位置中的值。
### 模板类vector
类似于string类是一种动态数组（可以在运行阶段设置vector对象的长度，可在结尾附加新的数据也可以在中间插入新数据）基本上，它是使用new创建动态数组的替代品。vector类确实使用new和delete来管理内存，但这种工作时自动完成的。
使用示例：
```
# include<vector>
...
using namespace std;
vector<int> vi;         //创建一个0大小的int数组
int n;
cin >> n;
vector<double> vd(n);           //创建一个n个double变量的数组
```
其中，vi是一个vector < int >对象，vd是一个vector < double >对象。由于vector对象在您插入或者添加值时自动调整长度，因此可以将vi初始长度设置为0。但是要调整长度，需要使用vector包中的各种方法。
一般来说下面的声明创建一个名为vt的vector对象，它可存储n_elem个类型为typeName的元素：
```
vector<typeName> vt(n_elem);
```
### 模板类array（C++ 11）
vector比数组功能强大，但是效率稍低。如果需求时固定长度的数组，使用数组时更好的选择，但是不那么安全方便。所以在C++11中专家了array类，他也位于名称空间std中。与数组一样也是长度固定，也使用栈（静态内存分配），而不是自由存储区，因此其效率与数组一样，但是更加方便安全。要创建array对象需要包含头文件array。示例如下：
```
#include <array>
...
using namespace std;
array<int,5>ai;     //
array<double,4> ad = {1.2,2.1,3.43,4.3};
```
推广可得，下面的声明创建一个名为arr的array对象，他包含n_elem个类型为typename的元素：
```
array<typeName,n_elem>arr;
```
与创建vector对象不同的时，n_elem不能是变量。
在C++11中，可将列表初始化用于vector和array对象，但是在C ++ 98 中，不能对vector对象这样做。
### 字符串
字符串是以空字符为结尾的一系列字符。字符串可以用引号括起的字符串常量表示，其中隐式包含了结尾的空字符。可以将字符串存储在char数组中，可以用被初始化为指向字符串的char指针表示字符串。函数strlen（）返回字符串长度，其中不包括空字符。函数strcpy（）将字符串从一个位置复制到另一个位置。在使用这些字符串时，应当包含头文件csting或string.h。
头文件string支持的C++string类提供了另一种对用户国家友好的字符串处理方法。具体地说，string对象根据要存储的字符串自动调整其大小，用户可以使用复制运算符来复制字符串。
new运算符允许在程序运行时为数据对象全球内存。该运算符返回获得内存的地址，可以将这个地址赋给一个指针，程序将只能使用该指针来访问这块内存。如果数据对象是简单变量，则可以使用接触引用运算符(*)来获得其值；如果数据对象是数组，则可以像使用数组名那样使用指针来访问元素；如果数据对象是结构，则可以用指针解除引用运算符（->)来访问其成员。
### 指针与数组
两者关系紧密。如果ar是数组名，则表达式ar[i]被解释为*(ar+i)，其中数组名被解释为第一个元素的地址。这样，数组名作用就与指针相同。反过来，可以使用数组表示法，通过指针名来访问new分配的数组中的元素。
运算符new和delete允许显式控制何时给数据对象分配内存，何时将内存归还给内存池。自动变量实在函数中声明的变量，而静态变量是在函数外或者使用关键字static声明的变量，这两种变量都不太灵活。自动变量在程序执行到其所属的代码块（通常是函数定义）时产生，在离开该代码块时终止。静态变量在整个程序周期内都存在。
C ++ 98新增的标准模板库（STL）提供了模板类vector，它是动态数组的替代品。C ++ 11提供了模板类array，它是定长数组的替代品。

